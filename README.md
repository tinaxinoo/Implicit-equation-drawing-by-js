# Implicit-equation-drawing-by-js
# js二元隐式方程图像绘制 隐函数绘图

详细文章请访问[二元隐式方程(隐函数)图像绘制](https://www.cnblogs.com/kadog/articles/18013577),内含代码示例.

一些bug的修复方法:

1.对于这些函数
   **ln(x)-y=0**

**sqrt(x)-y=0**

**sin(40/x)-y=0**

**sin(x)/x-y=0**

**sqrt(x-1)/sqrt(x-3)-y=0**
添加验证四个值中至少有两个 NaN 就舍弃

```
var countNaN = 0;
            for (var i = 0; i < fValues.length; i++) {
                if (isNaN(fValues[i])) {
                    countNaN++;
                }

            }

            if (countNaN >= 2) {
                continue;
            }
```

![image](https://github.com/tinaxinoo/Implicit-equation-drawing-by-js/assets/109138472/33de4fcb-78c0-4c77-8e2f-f325397ffdc4)

2.函数字符串是用正则匹配的,需要用全字匹配
原来是``expression = expression.replace(/cos/g, 'Math.cos');``  

应修改为`expression = expression.replace(/\bcos\b/g, 'Math.cos');`

一些无法修复的bug:
1.对于tan(x)-y=0,在x=π/2+kπ应该是不存在的,但是用四个顶点的符号判断这些区域符号不全相同,也就无法区分出真实的无解情况.尝试添加了一些限制,虽然去除了不存在的值,但是也把一些有解值去除了,而且在把视角拉远时这些不存在的值又出现了.可以考虑使用常规的显函数绘制方法,添加斜率限制.

2.对于**f(x,y)=√(x-3)\*√(1-x)-y**,方程只有两个解,其他x代入都是不符合定义域的,带进去都是NaN.尝试把实数扩展到复数,可能行.
![image](https://github.com/tinaxinoo/Implicit-equation-drawing-by-js/assets/109138472/82f8fd4c-33d9-42e5-ad81-b5c3b208fbba)
| **应填充点: A 点** | **左上**     | **左下**     | **右下**     | **右上**     | **是否填充** |
| -------------------- | -------------- | -------------- | -------------- | -------------- | -------------- |
| **p1**             | **-1+√3j**  | **1+√3j**   | **0+0j**     | **-2+0j**    | **1**        |
| **p2**             | **-2+√3j**  | **0+√3j**   | **-1+0j**    | **-3+0j**    | **1**        |
| **p3**             | **0+√3j**   | **2+√3j**   | **1+0j**     | **-1+0j**    | **1**        |
| **p4**             | **-5+√3j**  | **-3+√3j**  | **-4+0j**    | **-6+0j**    | **0**        |
| **p5**             | **3+√3j**   | **5+√3j**   | **4+0j**     | **2+0j**     | **0**        |
| **p6**             | **-1+√35j** | **1+√35j**  | **1+√15j**  | **-1+√15j** | **0**        |
| **p7**             | **-1+√3j**  | **1+√3j**   | **1+√15j**  | **-1+√15j** | **0**        |
| **p8**             | **-3+0j**    | **-1+0j**    | **0+√3j**   | **-2+√3j**  | **0**        |
| **p9**             | **-2+√35j** | **0+√35j**  | **0+√15j**  | **-2+√15j** | **0**        |
| **p10**            | **-5+√35j** | **-3+√35j** | **-3+√15j** | **-5+√15j** | **0**        |
| **p11**            | **-1+√80j** | **1+√80j**  | **1+√48j**  | **-1+√48j** | **0**        |

![image](https://github.com/tinaxinoo/Implicit-equation-drawing-by-js/assets/109138472/5dfa4a8d-9150-4b4e-b116-3517033b9d5f)

3.对于**sin(x)^2+sin(y)^2-2=0**,这个解全部是奇点,sin(x)的最大值是1,所以两个相加最大值是2,f(x,y)根本无法算出正值.判断顶点符号的方法对这种函数无效.比较简单的解决方法就是设置一个微小值,如果abs(f(x,y))小于这个微小值就认为该点是解.

4.使用canvas,所以绘制效果可能会有一些模糊,使用dom绘制太慢了.
---

---
代码是速通的,比较简陋,算法也没有完善,将就看把.可以使用四叉树递归减少计算量,不优化当前的绘制速度也挺快的,拖动视角流畅.
由于太多bug了(大部分隐函数都能绘制),所学知识无法解决,所以就不写了.
